---
layout  : wiki
title   : 샤딩(Sharding)
summary : 
date    : 2019-09-26 16:00:47 +0900
updated : 2019-09-26 18:20:17 +0900
tag     : db
toc     : true
public  : false
parent  : database
latex   : false
---
* TOC
{:toc}

# From: 관계형 데이터베이스 실전 입문

## Sharding?

* 샤딩은 행별로 데이터의 저장 위치를 변경하는 구조를 말한다.
* 각 샤드의 스키마 구조는 같다. 다른 것은 데이터의 내용이다.
* 애플리케이션은 ID나 지역 등을 기준으로 데이터를 어느 샤드에 저장하는지를 판별한다.
    * 이 판별 로직을 애플리케이션에서 구현해야 한다.
* 갱신 처리 성능 향상에 한계가 있을 때 샤딩을 검토할 수 있다.

## 문제점

* 여러 샤드를 넘나드는 쿼리를 실행할 수 없다.
    * 해당 DB 서버 내부의 데이터만 join할 수 있다.
* 각각의 샤드는 같은 구조의 스키마를 갖지만, 자동으로 동기화되지는 않는다는 점에 주의.
    * 스키마 구조를 변경하려면 DBA가 모든 샤드에 적용해줘야 한다.

# From: 데이터 중심 애플리케이션 설계

> 5장에서 동일한 데이터의 복사본 여러 개를 다른 노드에 저장하는 개념인 복제를 다뤘다.
데이터셋이 매우 크거나 질의 처리량이 매우 높다면 복제만으로는 부족하고 데이터를 **파티션**으로 쪼갤 필요가 있다.
이 작업을 샤딩이라고도 한다.[^define-sharding]

* 샤딩: 대용량 데이터베이스를 의도적으로 작은 단위(파티션)로 쪼개는 방법.

한편, 파티션이라는 단어는 여러 DB에서 다른 용어로 쓰이고 있다.[^define-partition]

>
여기서 말하는 **파티션**은 몽고DB, 엘라스틱서치, 솔라클라우드의 **샤드(shard)**에 해당한다.
HBase에서는 **리전(region)**, 빅테이블에서는 **태블릿(tablet)**, 카산드라와 리악에서는 **브이노드(vnode)**, 카우치베이스에서는 **브이버켓(vBucket)**이라고 부른다.
그러나 **파티셔닝**이 가장 널리 쓰이는 용어이므로 이 책에서는 계속 파티션을 사용한다.

# 참고문헌

* 관계형 데이터베이스 실전 입문 / 오쿠노 미키야 저 / 성창규 역 / 위키북스 / 초판 2016년 07월 20일 / 원서 : 理論から學ぶデ-タベ-ス實踐入門 リレ-ショナルモデルによる效率的なSQL/奧野幹也
* 데이터 중심 애플리케이션 설계 / 마틴 클레프만 저/정재부, 김영준, 이도경 역 / 위키북스 / 초판발행 2018년 04월 12일

# 주석

[^define-sharding]: 데이터 중심 애플리케이션 설계. 6장. 199쪽.
[^define-partition]: 데이터 중심 애플리케이션 설계. 6장. 199쪽.
